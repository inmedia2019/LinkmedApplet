(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-predetails-predetails"],{"0ff2":function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"pf return center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.reTurn.apply(void 0,arguments)}}},[t._v("返回")])},r=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}))},2469:function(t,e,i){"use strict";var n=i("e57c"),a=i.n(n);a.a},"3d00":function(t,e,i){"use strict";var n=i("ee27");i("c975"),i("e25e"),i("ac1f"),i("5319"),i("841c"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("d0af")),r=n(i("e753")),s={components:{reTurn:r.default},data:function(){return{issign:!1,search:"",info:{},serverTime:"",countDown:"",countEnd:"",tiemtxt:"",result:!1,resultid:"",code:""}},onLoad:function(t){var e=this.$conFig.issign(t.share,"pages/predetails/predetails?share=true&id="+t.id,t.oid);e&&(this.resultid=t.id,console.log(this.resultid),this.load())},onShow:function(){this.$conFig.onWeixin("领医迈","　","/pages/predetails/predetails?share=true&id="+this.resultid,"s.jpg")},onShareAppMessage:function(t){return"button"===t.from&&this.userlog(6),{title:this.info.title,path:"/pages/predetails/predetails?share=true&id="+this.resultid}},filters:{formatRichText:function(t){try{var e=t.replace(/<img[^>]*>/gi,(function(t,e){return t=t.replace(/style="[^"]+"/gi,"").replace(/style='[^']+'/gi,""),t=t.replace(/width="[^"]+"/gi,"").replace(/width='[^']+'/gi,""),t=t.replace(/height="[^"]+"/gi,"").replace(/height='[^']+'/gi,""),t}));return e=e.replace(/style="[^"]+"/gi,(function(t,e){return t=t.replace(/width:[^;]+;/gi,"max-width:100%;").replace(/width:[^;]+;/gi,"max-width:100%;"),t})),e=e.replace(/<br[^>]*\/>/gi,""),e=e.replace(/\<img/gi,'<img style="max-width:100%;height:auto;display:inline-block;margin:10rpx auto;"'),e}catch(i){}}},methods:{setTim:function(t){var e=this;function i(t){return t<10?"0"+t:t}setInterval((function(){var t=new Date;e.countDown=e.info.startTime-t.getTime(),e.countEnd=e.info.endTime-t.getTime();var n=parseInt(e.countDown/1e3/60/60/24),a=parseInt(e.countDown/1e3/60/60%24),r=parseInt(e.countDown/1e3/60%60),s=parseInt(e.countDown/1e3%60);0==n?n="":n+="天 ",e.tiemtxt=n+i(a)+":"+i(r)+":"+i(s)+" "}),1e3)},formatDate:function(t){t=new Date;var e="-",i=t.getFullYear(),n=t.getMonth()+1,a=t.getDate();n>=1&&n<=9&&(n="0"+n),a>=0&&a<=9&&(a="0"+a);var r=i+e+n+e+a;return r},load:function(t){var e=this;this.$conFig.alert_Load(),this.$reqUest.get("inmedia","/linyimaiapi.ashx?Method=markcheck",{classid:this.resultid}).then((function(t){var i=(0,a.default)(t,2),n=(i[0],i[1]);e.info=e.$conFig.newList(JSON.parse(n.data.message))[0];var r=e.info.endTime,s=e.info.startTime,o=e.info.requestTime;e.info.appointment=""==e.info.appointment?0:e.info.appointment,e.info.endTime=r.substring(r.indexOf("/Date(")+6,r.length-2),e.info.startTime=s.substring(s.indexOf("/Date(")+6,s.length-2),e.info.startTimes=new Date(1e3*parseInt(e.info.startTime/1e3)).toLocaleString().replace(/:\d{1,2}$/," "),e.serverTime=o.substring(o.indexOf("/Date(")+6,o.length-2),console.log(e.info),e.setTim(),setTimeout((function(){e.issign=!0,uni.hideLoading()}),1e3),1==e.search?e.userlog(2):e.userlog(1)}))},userlog:function(t){console.log(this.info.id,this.info.title,this.info.expert,t,this.info.expert_id),this.$reqUest.userLog({ClassType:"课程直播",ClassId:this.info.id,ClassTitle:this.info.title,ClassAuthor:this.info.expert,OperationType:t,doctorId:this.info.expert_id}).then((function(t){var e=(0,a.default)(t,2),i=(e[0],e[1]);console.log(i),console.log("课程直播")}))},onResult:function(){console.log("////");if(!(this.countEnd<0))return"未预约!"!=this.info.reservationState?(console.log("1111"),this.countDown<0?(console.log("-----"),void(window.location.href=this.info.link)):void this.$conFig.alert_Tips("您已预约，请等待直播开始！")):void(this.countDown<0?window.location.href=this.info.link:(this.$conFig.alert_Load(),this.savemark()));this.$conFig.alert_Tips("已结束，请预约其他课程！")},savemark:function(){var t=this,e=this;this.$reqUest.get("inmedia","/linyimaiapi.ashx?Method=wechasubscription",{openid:uni.getStorageSync("userInfo").openid,classid:this.resultid,Page:"/pages/predetails/predetails?share=true&id="+e.resultid,QuestionLabel:e.info.title,Time:e.info.startTime,MainLecturer:e.info.expert}).then((function(e){var i=(0,a.default)(e,2);i[0],i[1];t.info.reservationCount++,t.info.reservationState="已预约!",uni.hideLoading(),t.$conFig.alert_Tips("预约成功！"),t.countDown<0&&setTimeout((function(){window.location.href=t.info.link}),2e3)}))}}};e.default=s},4353:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{}},methods:{reTurn:function(t){getCurrentPages().length>1?"pages/interest/interest"==getCurrentPages()[0].route?uni.reLaunch({url:"/pages/index/index"}):uni.navigateBack({delta:1}):uni.reLaunch({url:"/pages/index/index"})}}};e.default=n},"48d2":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".return[data-v-ad38dd0c]{bottom:100px;right:20px;width:50px;height:50px;border-radius:100px;background:#fff;box-shadow:0 0 10px rgba(0,0,0,.3)}",""]),t.exports=e},"53c5":function(t,e,i){"use strict";i.r(e);var n=i("4353"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},"606d":function(t,e,i){"use strict";i.r(e);var n=i("f3f1"),a=i("7ad3");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("ecb7");var s,o=i("f0c5"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"d20d13cc",null,!1,n["a"],s);e["default"]=c.exports},"7ad3":function(t,e,i){"use strict";i.r(e);var n=i("3d00"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},"7f96":function(t,e,i){var n=i("8f36");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("43f3ee2f",n,!0,{sourceMap:!1,shadowMode:!1})},"8f36":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,"uni-scroll-view[data-v-d20d13cc]{top:0;left:0;bottom:64px;right:0}.preimg[data-v-d20d13cc]{width:51px;height:51px;border-radius:50px}.pernr[data-v-d20d13cc]{width:calc(100% - 65px)}.prebutt[data-v-d20d13cc]{height:64px;background:#313131;bottom:0;left:0;width:100%;box-shadow:0 -5px 20px 0 rgba(0,0,0,.09)}.prenr1[data-v-d20d13cc]{width:calc(100% - 130px);height:64px}.prenr2[data-v-d20d13cc]{width:130px;height:64px}",""]),t.exports=e},b6802:function(t,e,i){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}i.d(e,"a",(function(){return n}))},d0af:function(t,e,i){"use strict";function n(t){if(Array.isArray(t))return t}i.r(e);i("a4d3"),i("e01a"),i("d28b"),i("e260"),i("d3b7"),i("3ca3"),i("ddb0");function a(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)if(i.push(s.value),e&&i.length===e)break}catch(c){a=!0,r=c}finally{try{n||null==o["return"]||o["return"]()}finally{if(a)throw r}}return i}}var r=i("dde1");function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){return n(t)||a(t,e)||Object(r["a"])(t,e)||s()}i.d(e,"default",(function(){return o}))},dde1:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));i("a630"),i("fb6a"),i("d3b7"),i("25f0"),i("3ca3");var n=i("b6802");function a(t,e){if(t){if("string"===typeof t)return Object(n["a"])(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Object(n["a"])(t,e):void 0}}},e57c:function(t,e,i){var n=i("48d2");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("24a5c675",n,!0,{sourceMap:!1,shadowMode:!1})},e753:function(t,e,i){"use strict";i.r(e);var n=i("0ff2"),a=i("53c5");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("2469");var s,o=i("f0c5"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"ad38dd0c",null,!1,n["a"],s);e["default"]=c.exports},ecb7:function(t,e,i){"use strict";var n=i("7f96"),a=i.n(n);a.a},f3f1:function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"pf whtl"},[t.issign?[i("v-uni-view",{staticClass:"pr animated fadeIn fast "},[i("v-uni-scroll-view",{staticClass:"pf bfff",attrs:{"scroll-y":!0}},[i("v-uni-view",{},[i("v-uni-view",{staticClass:"center"},[i("v-uni-image",{staticClass:"w100",attrs:{src:t.info.thumbnail.src,mode:"widthFix"}})],1),i("v-uni-view",{staticClass:"bodys cB92727 f16",staticStyle:{background:"#F5F6FA"}},[t._v(t._s(t.info.title))]),i("v-uni-view",{staticClass:"pr ovh",staticStyle:{background:"#fff"}},[i("v-uni-view",{staticClass:"body f15 c4A4A4A pr z3"},[i("v-uni-view",{staticClass:"ovh"},[i("v-uni-view",{staticClass:"fl"},[t._v("直播时间")]),i("v-uni-view",{staticClass:"fr"},[t._v(t._s(t.info.startTimes))])],1),i("v-uni-view",{staticClass:"h10"}),i("v-uni-view",{staticClass:"h2 bDEDDDE op7"})],1)],1),i("v-uni-view",{staticClass:"body bfff",staticStyle:{"padding-top":"0px"}},[i("v-uni-rich-text",{attrs:{nodes:t._f("formatRichText")(t.info.content)}})],1),i("v-uni-view",{staticClass:" bfff",staticStyle:{height:"17px"}})],1)],1),i("v-uni-view",{staticClass:"pf prebutt center"},[i("v-uni-view",{staticClass:"prenr1 center"},[i("v-uni-view",{staticClass:"w100 ovh"},[i("v-uni-view",{staticClass:"center fl c999 f12"},[i("v-uni-view",{staticClass:"w15 h5"}),i("v-uni-view",[t._v("#"+t._s(t.info.category))]),i("v-uni-view",{staticClass:"w15 h5"}),i("v-uni-view",[t._v("|")]),i("v-uni-view",{staticClass:"w15 h5"}),i("v-uni-view",{staticClass:"f18 cD0021B"},[t._v(t._s(t.info.reservationCount))]),i("v-uni-view",{staticClass:"w5 h5"}),i("v-uni-view",[t._v("人已预约")])],1)],1)],1),i("v-uni-view",{staticClass:"prenr2 bbs center cfff",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onResult.apply(void 0,arguments)}}},[i("v-uni-view",[t.countEnd>0?[t.countDown>0?[i("v-uni-view",{staticClass:"tec fb f16"},[t._v(t._s("未预约!"==t.info.reservationState?"点击预约":"尚未开播"))]),i("v-uni-view",{staticClass:"tec f10"},[t._v(t._s(t.tiemtxt)+"后开始")])]:[i("v-uni-view",{staticClass:"tec fb f16"},[t._v(t._s("未预约!"==t.info.reservationState?"点击预约":"点击进入"))]),i("v-uni-view",{staticClass:"tec f10"},[t._v("已开始")])]]:[i("v-uni-view",{staticClass:"tec fb f16"},[t._v("课程已结束")])]],2)],1)],1)],1)]:t._e(),i("reTurn")],2)},r=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}))}}]);